<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <title>Mr. D.J.</title>
    <script src="zebralist.js" type="text/javascript">
    </script>
    <script type="text/javascript" language="javascript">
      function updatePlaylist() {
        var httpRequest;
	//document.getElementById("playlist").innerHTML = "Loading...";
        if (window.XMLHttpRequest) { // Mozilla, Safari, ...
            httpRequest = new XMLHttpRequest();
            if (httpRequest.overrideMimeType) {
                httpRequest.overrideMimeType('text/xml');
            }
        }
        else if (window.ActiveXObject) { // IE
            try {
                httpRequest = new ActiveXObject("Msxml2.XMLHTTP");
                }
                catch (e) {
                           try {
                                httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
                               }
                             catch (e) {}
                          }
                                       }

        if (!httpRequest) {
            alert('Giving up :( Cannot create an XMLHTTP instance');
            return false;
        }
        httpRequest.onreadystatechange = function() { updatePlaylistCallback(httpRequest,true); };
        httpRequest.open('GET', '../simpleajax/playlist', true);
	httpRequest.send('');
    }

    function updatePlaylistCallback(httpRequest,repeat) {

        if (httpRequest.readyState == 4) {
            if (httpRequest.status == 200) {
	        document.getElementById("playlist").innerHTML = httpRequest.responseText;
		stripe('playlist', 'rgb(245,245,245)', 'rgb(220,220,255)')

		if (repeat){
		    setTimeout("updatePlaylist();", 25000);
		    }

            } else {
	        document.getElementById("playlist").innerHTML = "Check your network connection";
		if (repeat){
		    setTimeout("updatePlaylist();", 5000);
		    }
            }
        }
    }
    </script>
  </head>
  <body onLoad="updatePlaylist('../simpleajax/playlist');">
    <ol id="playlist"> </ol>

  </body>
</html>
